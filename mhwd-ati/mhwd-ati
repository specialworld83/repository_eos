#!/bin/sh

set -e

filename="$1"

[ -e "$filename" ] || {
    echo "USAGE: $0 path/to/fglrxko_pci_ids.h" >&2
    exit 1
}

printf '%s\n' '# List generated by mhwd. Do not edit manually.'

grep "0x" "$filename" | \
  cut -d, -f1 | sed s/0x// | sed 's/"//g' | \
  sort | uniq | sed -e 's/^[ \t]*//'

